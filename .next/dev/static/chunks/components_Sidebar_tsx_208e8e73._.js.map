{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/Sidebar.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * ======== Sticky Home + Handle Placement (easy to tweak) ========\r\n * These are viewport-fixed so they never drift as the sidebar expands/collapses.\r\n * Adjust the constants to nudge positioning without touching layout code.\r\n */\r\nexport const HOME_TOP_CLASS = \"top-2\";\r\nexport const HOME_LEFT_CLASS = \"left-2\";\r\n// Place the handle *under* the home icon, aligned to the same left edge:\r\nexport const HANDLE_TOP_CLASS = \"top-14\";\r\nexport const HANDLE_LEFT_CLASS = \"left-2\";\r\n\r\n// Visual sizes\r\nconst HOME_ICON_SIZE = \"h-8 w-8\";  // Home icon size\r\nconst HANDLE_SIZE = \"h-7 w-7\";     // Smaller so it fits nicely inside collapsed rail\r\n\r\n/** Simple class joiner (no extra deps) */\r\nfunction cx(...classes: Array<string | false | null | undefined>) {\r\n    return classes.filter(Boolean).join(\" \");\r\n}\r\n\r\n/** Inline SVG icons (no extra deps) */\r\nfunction IconGrid({ className }: { className?: string }) {\r\n    return (\r\n        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className={className} aria-hidden=\"true\">\r\n            <path d=\"M3 3h6v6H3V3zm8 0h6v6h-6V3zM3 11h6v6H3v-6zm8 0h6v6h-6v-6z\" />\r\n        </svg>\r\n    );\r\n}\r\nfunction IconTable({ className }: { className?: string }) {\r\n    return (\r\n        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className={className} aria-hidden=\"true\">\r\n            <path d=\"M3 4a2 2 0 012-2h10a2 2 0 012 2v2H3V4zm0 4h16v3H3V8zm0 5h16v1a2 2 0 01-2 2H5a2 2 0 01-2-2v-1z\" />\r\n        </svg>\r\n    );\r\n}\r\nfunction IconTrendUp({ className }: { className?: string }) {\r\n    return (\r\n        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className={className} aria-hidden=\"true\">\r\n            <path d=\"M3 14a1 1 0 100 2h14a1 1 0 100-2H3zm2.293-5.707a1 1 0 011.414 0L9 10.586l3.293-3.293A1 1 0 0113 7h3a1 1 0 110 2h-2.586l-3.707 3.707a1 1 0 01-1.414 0L6 9.414l-.293.293a1 1 0 11-1.414-1.414z\" />\r\n        </svg>\r\n    );\r\n}\r\nfunction IconLayers({ className }: { className?: string }) {\r\n    return (\r\n        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className={className} aria-hidden=\"true\">\r\n            <path d=\"M10 2l8 4-8 4-8-4 8-4zm-6.928 8.629L10 14l6.928-3.371A1 1 0 0017 9.764l-7 3.4-7-3.4a1 1 0 00-.928 1.865zM3.072 13.63L10 17l6.928-3.371a1 1 0 10-.928-1.865L10 14.8l-6-3a1 1 0 10-.928 1.829z\" />\r\n        </svg>\r\n    );\r\n}\r\nfunction IconLightbulb({ className }: { className?: string }) {\r\n    return (\r\n        <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className={className} aria-hidden=\"true\">\r\n            <path d=\"M10 2a6 6 0 00-3.75 10.68c.42.33.75.97.75 1.57V15a1 1 0 001 1h4a1 1 0 001-1v-.75c0-.6.33-1.24.75-1.57A6 6 0 0010 2zm-2 14a1 1 0 100 2h4a1 1 0 100-2H8z\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\n/** Nav model */\r\nconst NAV_ITEMS = [\r\n    { label: \"Overview\", href: \"/\", icon: IconGrid },\r\n    { label: \"Budget\", href: \"/agm/budget\", icon: IconTable },\r\n    { label: \"Forecast\", href: \"/agm/forecast\", icon: IconTrendUp },\r\n    { label: \"Rollups\", href: \"/agm/rollups\", icon: IconLayers },\r\n    { label: \"Insights\", href: \"/agm/insights\", icon: IconLightbulb }, // role toggle lives just below\r\n] as const;\r\n\r\ntype Role = \"AGM\" | \"Executive\";\r\n\r\nexport default function Sidebar() {\r\n    const pathname = usePathname();\r\n\r\n    // Collapsed by default (persisted)\r\n    const [collapsed, setCollapsed] = useState<boolean>(true);\r\n\r\n    // Single, app-wide role (persisted)\r\n    const [role, setRole] = useState<Role>(\"AGM\");\r\n\r\n    // ---- hydrate from localStorage ----\r\n    useEffect(() => {\r\n        try {\r\n            const savedCollapsed = localStorage.getItem(\"bi.sidebar.collapsed\");\r\n            if (savedCollapsed !== null) setCollapsed(savedCollapsed === \"true\");\r\n            const savedRole = localStorage.getItem(\"bi.role\");\r\n            if (savedRole === \"Executive\" || savedRole === \"AGM\") setRole(savedRole);\r\n        } catch { }\r\n    }, []);\r\n\r\n    // ---- persist ----\r\n    useEffect(() => {\r\n        try {\r\n            localStorage.setItem(\"bi.sidebar.collapsed\", String(collapsed));\r\n        } catch { }\r\n    }, [collapsed]);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            localStorage.setItem(\"bi.role\", role);\r\n            window.dispatchEvent(new CustomEvent(\"bi:roleChanged\", { detail: { role } }));\r\n        } catch { }\r\n    }, [role]);\r\n\r\n    const collapseAria = useMemo(\r\n        () => (collapsed ? \"Expand sidebar\" : \"Collapse sidebar\"),\r\n        [collapsed]\r\n    );\r\n\r\n    // Wider collapsed rail so controls sit *inside* it\r\n    const railWidthCollapsed = \"w-20\";\r\n\r\n    return (\r\n        <>\r\n            {/* ======= Sticky HOME button (top-left, above teal header) ======= */}\r\n            <div className={cx(\"fixed z-50\", HOME_TOP_CLASS, HOME_LEFT_CLASS, \"pointer-events-auto\")}>\r\n                <Link\r\n                    href=\"/\"\r\n                    aria-label=\"Go home\"\r\n                    className={cx(\r\n                        \"inline-flex items-center justify-center rounded-md bg-white\",\r\n                        \"shadow ring-1 ring-slate-200 hover:bg-slate-50\",\r\n                        \"focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-600 focus-visible:ring-offset-2\",\r\n                        \"transition-colors\"\r\n                    )}\r\n                >\r\n                    {/* PNG asset from /public */}\r\n                    <img\r\n                        src=\"/money-management.png\"\r\n                        alt=\"\"\r\n                        width={32}\r\n                        height={32}\r\n                        className={HOME_ICON_SIZE}\r\n                        draggable={false}\r\n                    />\r\n                </Link>\r\n            </div>\r\n\r\n            {/* ======= Sticky collapse/expand handle (under home, inside rail) ======= */}\r\n            <div className={cx(\"fixed z-50\", HANDLE_TOP_CLASS, HANDLE_LEFT_CLASS, \"pointer-events-auto\")}>\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label={collapseAria}\r\n                    onClick={() => setCollapsed((c) => !c)}\r\n                    className={cx(\r\n                        \"inline-flex items-center justify-center rounded-md bg-white\",\r\n                        `${HANDLE_SIZE} shadow ring-1 ring-slate-200 hover:bg-slate-50`,\r\n                        \"focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-600 focus-visible:ring-offset-2\",\r\n                        \"transition-colors\"\r\n                    )}\r\n                >\r\n                    <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" className=\"h-4 w-4 text-slate-700\">\r\n                        {collapsed ? (\r\n                            // \"Expand\" → point right\r\n                            <path\r\n                                fillRule=\"evenodd\"\r\n                                d=\"M7.22 4.22a.75.75 0 011.06 0l5 5a.75.75 0 010 1.06l-5 5a.75.75 0 01-1.06-1.06L11.44 10 7.22 5.28a.75.75 0 010-1.06z\"\r\n                                clipRule=\"evenodd\"\r\n                            />\r\n                        ) : (\r\n                            // \"Collapse\" → point left\r\n                            <path\r\n                                fillRule=\"evenodd\"\r\n                                d=\"M12.78 15.78a.75.75 0 01-1.06 0l-5-5a.75.75 0 010-1.06l5-5a.75.75 0 111.06 1.06L8.56 10l4.22 4.22a.75.75 0 010 1.06z\"\r\n                                clipRule=\"evenodd\"\r\n                            />\r\n                        )}\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n\r\n            {/* ======= Sidebar rail ======= */}\r\n            <aside\r\n                className={cx(\r\n                    \"relative z-40 h-full border-r border-slate-200 bg-white\",\r\n                    \"transition-[width] duration-200 ease-in-out\",\r\n                    collapsed ? railWidthCollapsed : \"w-64\"\r\n                )}\r\n                aria-label=\"Primary\"\r\n            >\r\n                {/* Extra top padding so fixed buttons don't overlap; extra bottom padding to clear any bottom overlays */}\r\n                <nav className=\"flex h-full flex-col overflow-y-auto pt-24 pb-28\">\r\n                    <ul className=\"px-2\">\r\n                        {NAV_ITEMS.map((item) => {\r\n                            const active =\r\n                                item.href === \"/\" ? pathname === \"/\" : pathname.startsWith(item.href);\r\n                            const Icon = item.icon;\r\n                            return (\r\n                                <li key={item.href} className=\"my-1\">\r\n                                    <Link\r\n                                        href={item.href}\r\n                                        className={cx(\r\n                                            \"group flex items-center rounded-md px-2 py-2 text-sm font-medium\",\r\n                                            \"focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-600 focus-visible:ring-offset-2\",\r\n                                            active\r\n                                                ? \"bg-teal-600 text-white\"\r\n                                                : \"text-slate-700 hover:bg-slate-100\"\r\n                                        )}\r\n                                        aria-current={active ? \"page\" : undefined}\r\n                                    >\r\n                                        {/* Icon shows in both states; label hides when collapsed */}\r\n                                        <Icon\r\n                                            className={cx(\r\n                                                \"h-5 w-5 shrink-0\",\r\n                                                active ? \"text-white\" : \"text-slate-500 group-hover:text-slate-700\"\r\n                                            )}\r\n                                        />\r\n                                        <span className={cx(\"ml-3\", collapsed && \"sr-only\")}>{item.label}</span>\r\n                                    </Link>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n\r\n                    {/* === Single Role Toggle (only here) === */}\r\n                    <div className=\"mt-auto px-2 pt-4\">\r\n                        {collapsed ? (\r\n                            <button\r\n                                type=\"button\"\r\n                                aria-label={\r\n                                    role === \"AGM\"\r\n                                        ? \"Current role AGM. Activate to switch to Executive.\"\r\n                                        : \"Current role Executive. Activate to switch to AGM.\"\r\n                                }\r\n                                title={`Role: ${role}`}\r\n                                onClick={() => setRole((r) => (r === \"AGM\" ? \"Executive\" : \"AGM\"))}\r\n                                className={cx(\r\n                                    \"w-full rounded-md px-2 py-2 text-xs font-semibold\",\r\n                                    \"bg-slate-100 text-slate-800 hover:bg-slate-200\",\r\n                                    \"focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-600 focus-visible:ring-offset-2\",\r\n                                    \"relative z-40\"\r\n                                )}\r\n                            >\r\n                                {role}\r\n                            </button>\r\n                        ) : (\r\n                            <div className=\"flex flex-col gap-1 relative z-40\">\r\n                                <label htmlFor=\"bi-role\" className=\"text-xs font-semibold text-slate-600\">\r\n                                    Role\r\n                                </label>\r\n                                <select\r\n                                    id=\"bi-role\"\r\n                                    aria-label=\"Select role\"\r\n                                    value={role}\r\n                                    onChange={(e) => setRole(e.target.value as Role)}\r\n                                    className={cx(\r\n                                        \"rounded-md border border-slate-300 bg-white px-2 py-2 text-sm\",\r\n                                        \"text-slate-800 hover:border-slate-400\",\r\n                                        \"focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-600 focus-visible:ring-offset-2\"\r\n                                    )}\r\n                                >\r\n                                    <option value=\"AGM\">AGM</option>\r\n                                    <option value=\"Executive\">Executive</option>\r\n                                </select>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </nav>\r\n            </aside>\r\n        </>\r\n    );\r\n}\r\n``\r\n"],"names":[],"mappings":"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"}}]
}