{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/grid/AmountCell.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\n\r\n/**\r\n * AmountCell — standalone inline editor for the \"Amount\" column.\r\n * - Click to enter edit mode\r\n * - Commit on Enter/blur; Escape cancels\r\n * - Persists via table.options.meta.updateRow(rowIndex, { amount: next })\r\n *\r\n * Requirements from parent table:\r\n *   - The TanStack Table instance must define `meta.updateRow(index, partial)`\r\n *     which will update backing data (see BudgetGrid.tanstack.tsx).\r\n */\r\n\r\nexport default function AmountCell({\r\n    getValue,\r\n    row,\r\n    table,\r\n}: {\r\n    getValue: () => number | null | undefined;\r\n    row: any;\r\n    table: any;\r\n}) {\r\n    const initial = getValue();\r\n    const [editing, setEditing] = React.useState(false);\r\n    const [draft, setDraft] = React.useState<number | \"\">(\r\n        typeof initial === \"number\" ? initial : initial == null ? \"\" : Number(initial)\r\n    );\r\n\r\n    // Format helper (display only)\r\n    const fmtUSD = React.useCallback(\r\n        (n: number) =>\r\n            new Intl.NumberFormat(\"en-US\", {\r\n                style: \"currency\",\r\n                currency: \"USD\",\r\n                maximumFractionDigits: 0,\r\n            }).format(n),\r\n        []\r\n    );\r\n\r\n    const commit = () => {\r\n        const next = draft === \"\" ? null : Number(draft);\r\n        table.options.meta?.updateRow?.(row.index, { amount: next });\r\n        setEditing(false);\r\n    };\r\n\r\n    const cancel = () => {\r\n        // Revert to current value in the row\r\n        const current = getValue();\r\n        setDraft(typeof current === \"number\" ? current : current == null ? \"\" : Number(current));\r\n        setEditing(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"text-right\">\r\n            {editing ? (\r\n                <input\r\n                    autoFocus\r\n                    type=\"number\"\r\n                    step={1}\r\n                    className=\"w-full rounded border border-slate-300 px-2 py-1 text-right text-sm\"\r\n                    value={draft}\r\n                    onChange={(e) => setDraft(e.target.value === \"\" ? \"\" : Number(e.target.value))}\r\n                    onBlur={commit}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\") commit();\r\n                        if (e.key === \"Escape\") cancel();\r\n                    }}\r\n                />\r\n            ) : (\r\n                <button\r\n                    className=\"w-full text-right tabular-nums\"\r\n                    onClick={() => setEditing(true)}\r\n                    title=\"Click to edit\"\r\n                >\r\n                    {typeof initial === \"number\" ? fmtUSD(initial) : \"—\"}\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;;;AAFA;;AAee,SAAS,WAAW,EAC/B,QAAQ,EACR,GAAG,EACH,KAAK,EAKR;;IACG,MAAM,UAAU;IAChB,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAC;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,yKAAc,CACpC,OAAO,YAAY,WAAW,UAAU,WAAW,OAAO,KAAK,OAAO;IAG1E,+BAA+B;IAC/B,MAAM,SAAS,4KAAiB;0CAC5B,CAAC,IACG,IAAI,KAAK,YAAY,CAAC,SAAS;gBAC3B,OAAO;gBACP,UAAU;gBACV,uBAAuB;YAC3B,GAAG,MAAM,CAAC;yCACd,EAAE;IAGN,MAAM,SAAS;QACX,MAAM,OAAO,UAAU,KAAK,OAAO,OAAO;QAC1C,MAAM,OAAO,CAAC,IAAI,EAAE,YAAY,IAAI,KAAK,EAAE;YAAE,QAAQ;QAAK;QAC1D,WAAW;IACf;IAEA,MAAM,SAAS;QACX,qCAAqC;QACrC,MAAM,UAAU;QAChB,SAAS,OAAO,YAAY,WAAW,UAAU,WAAW,OAAO,KAAK,OAAO;QAC/E,WAAW;IACf;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACV,wBACG,6LAAC;YACG,SAAS;YACT,MAAK;YACL,MAAM;YACN,WAAU;YACV,OAAO;YACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK,OAAO,EAAE,MAAM,CAAC,KAAK;YAC5E,QAAQ;YACR,WAAW,CAAC;gBACR,IAAI,EAAE,GAAG,KAAK,SAAS;gBACvB,IAAI,EAAE,GAAG,KAAK,UAAU;YAC5B;;;;;iCAGJ,6LAAC;YACG,WAAU;YACV,SAAS,IAAM,WAAW;YAC1B,OAAM;sBAEL,OAAO,YAAY,WAAW,OAAO,WAAW;;;;;;;;;;;AAKrE;GAlEwB;KAAA"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/grid/columns.ts"],"sourcesContent":["\r\n// components/grid/columns.ts\r\nimport type { ColumnDef } from '@tanstack/react-table';\r\nimport AmountCell from './AmountCell';\r\n\r\n/** Raw JSON shape you use today (kept intact) */\r\nexport type BudgetRow = {\r\n    type?: string;            // raw: \"expense\", \"revenue\", etc.\r\n    community?: string;\r\n    category?: string;\r\n    subCategory?: string;\r\n    budgetMethod?: string;    // present in data but NOT displayed as a column\r\n    driver?: string;\r\n    driverTag?: string;\r\n    glCode?: string | null;\r\n    period?: string;          // e.g., \"2026-03\"\r\n    amount?: number | string | null;\r\n    [key: string]: unknown;\r\n};\r\n\r\n// Back-compat alias if other files import BudgetLine\r\nexport type BudgetLine = BudgetRow;\r\n\r\n/* ---------------------------------- */\r\n/* Helpers: derive Year, Quarter, Month from \"YYYY-MM\" */\r\n/* ---------------------------------- */\r\n\r\n/** Return 2026 from \"2026-03\" */\r\nexport function deriveYear(period?: string): number | null {\r\n    if (!period) return null;\r\n    const y = parseInt(period.slice(0, 4), 10);\r\n    return Number.isFinite(y) ? y : null;\r\n}\r\n\r\n/** Internal: 1–12 from \"2026-03\" */\r\nfunction deriveMonthNumber(period?: string): number | null {\r\n    if (!period || period.length < 7) return null;\r\n    const m = parseInt(period.slice(5, 7), 10);\r\n    return m >= 1 && m <= 12 ? m : null;\r\n}\r\n\r\n/** Return month label: Jan, Feb, Mar, ... */\r\nexport function deriveMonthLabel(period?: string): string {\r\n    const m = deriveMonthNumber(period);\r\n    if (!m) return '';\r\n    const labels = [\r\n        '', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n    ];\r\n    return labels[m] ?? '';\r\n}\r\n\r\n/** Return quarter in format YYQ#: e.g., 26Q1, 25Q4 */\r\nexport function deriveQuarterLabel(period?: string): string {\r\n    const year = deriveYear(period);\r\n    const m = deriveMonthNumber(period);\r\n    if (!year || !m) return '';\r\n    const q = Math.ceil(m / 3);\r\n    const yy = String(year).slice(-2); // 2026 → \"26\"\r\n    return `${yy}Q${q}`;\r\n}\r\n\r\n/** Map raw \"type\" → UI label for Budget Type */\r\nexport function mapBudgetType(raw?: string): string {\r\n    if (!raw) return '';\r\n    const t = String(raw).toLowerCase();\r\n    if (t === 'expense') return 'Expense';\r\n    if (t === 'revenue') return 'Revenue';\r\n    if (t === 'capex' || t === 'capital' || t === 'capital_expenditure') return 'CapEx';\r\n    // Fallback: Title Case original value\r\n    return raw.charAt(0).toUpperCase() + raw.slice(1);\r\n}\r\n\r\n/* ---------------------------------- */\r\n/* Column definitions (ORDER LOCKED)  */\r\n/* Community | Category | SubCategory | GL Code | Budget Type | Year | Quarter | Month | Amount */\r\n/* ---------------------------------- */\r\n\r\nexport const columns: ColumnDef<BudgetRow, any>[] = [\r\n    {\r\n        id: 'community',\r\n        accessorKey: 'community',\r\n        header: 'Community',\r\n        enableResizing: true,\r\n        size: 200,\r\n    },\r\n    {\r\n        id: 'category',\r\n        accessorKey: 'category',\r\n        header: 'Category',\r\n        enableResizing: true,\r\n        size: 200,\r\n    },\r\n    {\r\n        id: 'subCategory',\r\n        accessorKey: 'subCategory',\r\n        header: 'SubCategory',\r\n        enableResizing: true,\r\n        size: 220,\r\n    },\r\n    {\r\n        id: 'glCode',\r\n        accessorKey: 'glCode',\r\n        header: 'GL Code',\r\n        enableResizing: true,\r\n        size: 110,\r\n        cell: (info) => String(info.getValue() ?? ''),\r\n    },\r\n    {\r\n        id: 'budgetType',\r\n        header: 'Budget Type',\r\n        accessorFn: (row) => mapBudgetType(row.type),\r\n        enableResizing: true,\r\n        size: 140,\r\n    },\r\n    {\r\n        id: 'year',\r\n        header: 'Year',\r\n        accessorFn: (row) => deriveYear(row.period),\r\n        enableResizing: true,\r\n        size: 90,\r\n        cell: (info) => {\r\n            const y = info.getValue() as number | null;\r\n            return y ?? '';\r\n        },\r\n        // Keep filtering on 'year' numeric-safe so toolbar Year works as expected\r\n        filterFn: (row, _columnId, filterValue: unknown) => {\r\n            const y = row.getValue<number | null>('year');\r\n            if (filterValue == null || filterValue === '') return true;\r\n            const fv = typeof filterValue === 'string' ? parseInt(filterValue, 10) : filterValue;\r\n            return y === fv;\r\n        },\r\n    },\r\n    {\r\n        id: 'quarter',\r\n        header: 'Quarter',\r\n        accessorFn: (row) => deriveQuarterLabel(row.period), // e.g., 26Q1\r\n        enableResizing: true,\r\n        size: 100,\r\n    },\r\n    {\r\n        id: 'month',\r\n        header: 'Month',\r\n        accessorFn: (row) => deriveMonthLabel(row.period),   // e.g., Jan\r\n        enableResizing: true,\r\n        size: 90,\r\n    },\r\n    {\r\n        id: 'amount',\r\n        accessorKey: 'amount',\r\n        header: 'Amount',\r\n        enableResizing: true,\r\n        size: 140,\r\n        cell: AmountCell,\r\n        meta: { isNumeric: true },\r\n    },\r\n];\r\n\r\nexport default columns;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/grid/ToolbarFilters.tsx"],"sourcesContent":["\r\n// components/grid/ToolbarFilters.tsx\r\nimport * as React from 'react';\r\nimport type { ColumnFiltersState, Table } from '@tanstack/react-table';\r\n\r\ntype Props = {\r\n    filters: ColumnFiltersState;\r\n    setFilters: React.Dispatch<React.SetStateAction<ColumnFiltersState>>;\r\n    onClear: () => void;\r\n    onExport: () => void;\r\n    table: Table<any>;\r\n};\r\n\r\nfunction getFilterValue(filters: ColumnFiltersState, id: string): string {\r\n    const f = filters.find(f => f.id === id);\r\n    return f?.value != null ? String(f.value) : '';\r\n}\r\n\r\nfunction setFilter(\r\n    setFilters: React.Dispatch<React.SetStateAction<ColumnFiltersState>>,\r\n    id: 'community' | 'year' | 'budgetType' | 'category',\r\n    value: string\r\n) {\r\n    setFilters(prev => {\r\n        const next = prev.filter(f => f.id !== id);\r\n        if (value !== '') {\r\n            const casted = id === 'year' ? Number(value) : value;\r\n            next.push({ id, value: casted as any });\r\n        }\r\n        return next;\r\n    });\r\n}\r\n\r\nfunction getOptions(table: Table<any>, columnId: string): string[] {\r\n    const col = table.getColumn(columnId);\r\n    if (!col) return [];\r\n    const pre = table.getPreFilteredRowModel();\r\n    const s = new Set<string>();\r\n    pre.flatRows.forEach(r => {\r\n        const v = r.getValue?.(columnId);\r\n        if (v == null) return;\r\n        const str = String(v);\r\n        if (str.trim().length) s.add(str);\r\n    });\r\n    return Array.from(s).sort((a, b) => a.localeCompare(b));\r\n}\r\n\r\nfunction Divider() {\r\n    return (\r\n        <span\r\n            aria-hidden=\"true\"\r\n            style={{\r\n                width: 1,\r\n                height: 22,\r\n                background: '#e5e5e5',\r\n                margin: '0 10px',\r\n                display: 'inline-block',\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default function ToolbarFilters({ filters, setFilters, onClear, onExport, table }: Props) {\r\n    const items: Array<{ id: 'community' | 'year' | 'budgetType' | 'category'; label: string; minWidth?: number }> = [\r\n        { id: 'community', label: 'Community', minWidth: 160 },\r\n        { id: 'year', label: 'Year', minWidth: 110 },\r\n        { id: 'budgetType', label: 'Budget Type', minWidth: 150 },\r\n        { id: 'category', label: 'Category', minWidth: 160 },\r\n    ];\r\n\r\n    const filteredCount = table.getFilteredRowModel().rows.length;\r\n    const communityCount = (() => {\r\n        const s = new Set<string>();\r\n        table.getFilteredRowModel().rows.forEach(r => {\r\n            const v = r.getValue?.('community');\r\n            if (v != null) s.add(String(v));\r\n        });\r\n        return s.size;\r\n    })();\r\n\r\n    return (\r\n        <div\r\n            className=\"grid-toolbar\"\r\n            style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: 0,\r\n                padding: '4px 4px 8px 4px',\r\n            }}\r\n        >\r\n            {items.map(({ id, label, minWidth }, idx) => {\r\n                const options = getOptions(table, id);\r\n                const value = getFilterValue(filters, id);\r\n                const control = (\r\n                    <div\r\n                        key={id}\r\n                        style={{\r\n                            display: 'inline-flex',\r\n                            alignItems: 'center',\r\n                            padding: '2px 10px',\r\n                            borderRadius: 6,\r\n                            border: '1px solid #e5e5e5',\r\n                            background: '#fff',\r\n                        }}\r\n                    >\r\n                        <select\r\n                            value={value}\r\n                            onChange={(e) => setFilter(setFilters, id, e.target.value)}\r\n                            disabled={options.length === 0}\r\n                            style={{\r\n                                border: 'none',\r\n                                outline: 'none',\r\n                                background: 'transparent',\r\n                                minWidth: minWidth ?? 120,\r\n                                cursor: options.length ? 'pointer' : 'not-allowed',\r\n                            }}\r\n                            aria-label={label}\r\n                        >\r\n                            <option value=\"\">{label}</option>\r\n                            {options.map(opt => (\r\n                                <option key={`${id}:${opt}`} value={opt}>{opt}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                );\r\n\r\n                return (\r\n                    <React.Fragment key={`frag-${id}`}>\r\n                        {control}\r\n                        {idx < items.length - 1 ? <Divider /> : <span style={{ width: 8 }} />}\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n\r\n            <div style={{ marginLeft: 'auto', display: 'inline-flex', gap: 12, alignItems: 'center', color: '#666' }}>\r\n                <span style={{ fontSize: 12 }}>{filteredCount} rows · {communityCount} communities</span>\r\n                <button type=\"button\" onClick={onClear}>Clear</button>\r\n                <button type=\"button\" onClick={onExport}>Export CSV</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/grid/VirtualRows.tsx"],"sourcesContent":["\r\n// components/grid/VirtualRows.tsx\r\nimport * as React from 'react';\r\n\r\ntype VirtualRowsProps<T> = {\r\n    /** All table rows (already filtered/sorted) in display order */\r\n    rows: T[];\r\n    /** Height of a single data row in pixels (estimate) */\r\n    rowHeight?: number;\r\n    /** Extra rows to render above/below the viewport */\r\n    overscan?: number;\r\n    /**\r\n     * The scrollable container that wraps the <table>.\r\n     * Widened to Element|null to accept HTMLDivElement refs without TS variance issues.\r\n     */\r\n    scrollContainerRef: React.RefObject<Element | null>;\r\n    /** Number of visible (non-hidden) columns; used for spacer colSpan */\r\n    visibleColumnCount: number;\r\n    /** Render function for an individual data row as <tr>...</tr> */\r\n    renderRow: (row: T, rowIndex: number) => React.ReactElement;\r\n    /** Disable virtualization (debug or small datasets) */\r\n    disableVirtual?: boolean;\r\n};\r\n\r\n/**\r\n * Table-safe virtualization for <tbody>:\r\n * - Renders only <tr>/<td> inside <tbody> (no <div>).\r\n * - Uses top/bottom spacer <tr> to preserve scroll height.\r\n * - SSR-safe: falls back to non-virtual on server / missing container metrics.\r\n */\r\nexport function VirtualRows<T>({\r\n    rows,\r\n    rowHeight = 36,\r\n    overscan = 6,\r\n    scrollContainerRef,\r\n    visibleColumnCount,\r\n    renderRow,\r\n    disableVirtual,\r\n}: VirtualRowsProps<T>) {\r\n    const isServer = typeof window === 'undefined';\r\n    const [viewport, setViewport] = React.useState({ scrollTop: 0, height: 0 });\r\n\r\n    React.useEffect(() => {\r\n        if (disableVirtual || isServer) return;\r\n        // We widened the ref type; here we assert to HTMLElement at usage time\r\n        const el = scrollContainerRef.current as HTMLElement | null;\r\n        if (!el) return;\r\n\r\n        const handle = () => {\r\n            setViewport({\r\n                scrollTop: el.scrollTop,\r\n                height: el.clientHeight,\r\n            });\r\n        };\r\n        handle();\r\n\r\n        el.addEventListener('scroll', handle, { passive: true });\r\n        const ro = new ResizeObserver(handle);\r\n        ro.observe(el);\r\n\r\n        return () => {\r\n            el.removeEventListener('scroll', handle);\r\n            ro.disconnect();\r\n        };\r\n    }, [scrollContainerRef, disableVirtual, isServer]);\r\n\r\n    // If virtualization is disabled or we can't measure yet, render all rows\r\n    if (disableVirtual || isServer || !scrollContainerRef.current || viewport.height === 0) {\r\n        return <>{rows.map((row, i) => renderRow(row, i))}</>;\r\n    }\r\n\r\n    const total = rows.length;\r\n    const estTotalHeight = total * rowHeight;\r\n\r\n    const startIndex = Math.max(0, Math.floor(viewport.scrollTop / rowHeight) - overscan);\r\n    const visibleCount = Math.ceil(viewport.height / rowHeight) + overscan * 2;\r\n    const endIndex = Math.min(total, startIndex + visibleCount);\r\n\r\n    const topPad = startIndex * rowHeight;\r\n    const bottomPad = Math.max(0, estTotalHeight - topPad - (endIndex - startIndex) * rowHeight);\r\n\r\n    return (\r\n        <>\r\n            {topPad > 0 && (\r\n                <tr aria-hidden=\"true\">\r\n                    <td colSpan={visibleColumnCount} style={{ height: topPad, padding: 0, border: 'none' }} />\r\n                </tr>\r\n            )}\r\n\r\n            {rows.slice(startIndex, endIndex).map((row, i) => renderRow(row, startIndex + i))}\r\n\r\n            {bottomPad > 0 && (\r\n                <tr aria-hidden=\"true\">\r\n                    <td colSpan={visibleColumnCount} style={{ height: bottomPad, padding: 0, border: 'none' }} />\r\n                </tr>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default VirtualRows;\r\n"],"names":[],"mappings":";;;;;;;AACA,kCAAkC;AAClC;;;;AA4BO,SAAS,YAAe,EAC3B,IAAI,EACJ,YAAY,EAAE,EACd,WAAW,CAAC,EACZ,kBAAkB,EAClB,kBAAkB,EAClB,SAAS,EACT,cAAc,EACI;;IAClB,MAAM,WAAW,+CAAkB;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,yKAAc,CAAC;QAAE,WAAW;QAAG,QAAQ;IAAE;IAEzE,0KAAe;iCAAC;YACZ,IAAI,kBAAkB,UAAU;YAChC,uEAAuE;YACvE,MAAM,KAAK,mBAAmB,OAAO;YACrC,IAAI,CAAC,IAAI;YAET,MAAM;gDAAS;oBACX,YAAY;wBACR,WAAW,GAAG,SAAS;wBACvB,QAAQ,GAAG,YAAY;oBAC3B;gBACJ;;YACA;YAEA,GAAG,gBAAgB,CAAC,UAAU,QAAQ;gBAAE,SAAS;YAAK;YACtD,MAAM,KAAK,IAAI,eAAe;YAC9B,GAAG,OAAO,CAAC;YAEX;yCAAO;oBACH,GAAG,mBAAmB,CAAC,UAAU;oBACjC,GAAG,UAAU;gBACjB;;QACJ;gCAAG;QAAC;QAAoB;QAAgB;KAAS;IAEjD,yEAAyE;IACzE,IAAI,kBAAkB,YAAY,CAAC,mBAAmB,OAAO,IAAI,SAAS,MAAM,KAAK,GAAG;QACpF,qBAAO;sBAAG,KAAK,GAAG,CAAC,CAAC,KAAK,IAAM,UAAU,KAAK;;IAClD;IAEA,MAAM,QAAQ,KAAK,MAAM;IACzB,MAAM,iBAAiB,QAAQ;IAE/B,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,SAAS,SAAS,GAAG,aAAa;IAC5E,MAAM,eAAe,KAAK,IAAI,CAAC,SAAS,MAAM,GAAG,aAAa,WAAW;IACzE,MAAM,WAAW,KAAK,GAAG,CAAC,OAAO,aAAa;IAE9C,MAAM,SAAS,aAAa;IAC5B,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,iBAAiB,SAAS,CAAC,WAAW,UAAU,IAAI;IAElF,qBACI;;YACK,SAAS,mBACN,6LAAC;gBAAG,eAAY;0BACZ,cAAA,6LAAC;oBAAG,SAAS;oBAAoB,OAAO;wBAAE,QAAQ;wBAAQ,SAAS;wBAAG,QAAQ;oBAAO;;;;;;;;;;;YAI5F,KAAK,KAAK,CAAC,YAAY,UAAU,GAAG,CAAC,CAAC,KAAK,IAAM,UAAU,KAAK,aAAa;YAE7E,YAAY,mBACT,6LAAC;gBAAG,eAAY;0BACZ,cAAA,6LAAC;oBAAG,SAAS;oBAAoB,OAAO;wBAAE,QAAQ;wBAAW,SAAS;wBAAG,QAAQ;oBAAO;;;;;;;;;;;;;AAK5G;GApEgB;KAAA;uCAsED"}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/grid/totals.ts"],"sourcesContent":["\r\n// components/grid/totals.ts\r\nimport type { Table } from '@tanstack/react-table';\r\n\r\nexport type NumericKey = string;\r\n\r\n/**\r\n * Sums numeric fields across a collection of row \"originals\".\r\n * Non-numeric / null / undefined values are ignored.\r\n */\r\nexport function buildTotals<T extends Record<string, unknown>>(\r\n    rows: T[],\r\n    numericKeys: readonly NumericKey[]\r\n): Record<NumericKey, number> {\r\n    const totals: Record<NumericKey, number> = Object.fromEntries(\r\n        numericKeys.map(k => [k, 0])\r\n    ) as Record<NumericKey, number>;\r\n\r\n    for (const row of rows) {\r\n        for (const k of numericKeys) {\r\n            const v = row[k];\r\n            const n = typeof v === 'string' ? Number(v) : (typeof v === 'number' ? v : NaN);\r\n            if (!Number.isNaN(n)) {\r\n                totals[k] += n;\r\n            }\r\n        }\r\n    }\r\n    return totals;\r\n}\r\n\r\n/**\r\n * Convenience helper: sums from the table's *filtered* row model.\r\n * Usage: buildTotalsFromTable(table, ['amount'])\r\n */\r\nexport function buildTotalsFromTable<T extends Record<string, unknown>>(\r\n    table: Table<T>,\r\n    numericKeys: readonly NumericKey[]\r\n): Record<NumericKey, number> {\r\n    const rows = table.getFilteredRowModel().rows.map(r => r.original);\r\n    return buildTotals(rows as T[], numericKeys);\r\n}\r\n"],"names":[],"mappings":"AACA,4BAA4B;;;;;;;AASrB,SAAS,YACZ,IAAS,EACT,WAAkC;IAElC,MAAM,SAAqC,OAAO,WAAW,CACzD,YAAY,GAAG,CAAC,CAAA,IAAK;YAAC;YAAG;SAAE;IAG/B,KAAK,MAAM,OAAO,KAAM;QACpB,KAAK,MAAM,KAAK,YAAa;YACzB,MAAM,IAAI,GAAG,CAAC,EAAE;YAChB,MAAM,IAAI,OAAO,MAAM,WAAW,OAAO,KAAM,OAAO,MAAM,WAAW,IAAI;YAC3E,IAAI,CAAC,OAAO,KAAK,CAAC,IAAI;gBAClB,MAAM,CAAC,EAAE,IAAI;YACjB;QACJ;IACJ;IACA,OAAO;AACX;AAMO,SAAS,qBACZ,KAAe,EACf,WAAkC;IAElC,MAAM,OAAO,MAAM,mBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ;IACjE,OAAO,YAAY,MAAa;AACpC"}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/BudgetGrid.tanstack.tsx"],"sourcesContent":["\r\n// components/BudgetGrid.tanstack.tsx\r\n'use client';\r\n\r\nimport * as React from 'react';\r\nimport {\r\n    Cell,\r\n    ColumnFiltersState,\r\n    Row,\r\n    SortingState,\r\n    TableOptions,\r\n    flexRender,\r\n    getCoreRowModel,\r\n    getFilteredRowModel,\r\n    getSortedRowModel,\r\n    useReactTable,\r\n} from '@tanstack/react-table';\r\n\r\nimport columns, { BudgetRow } from './grid/columns';\r\nimport ToolbarFilters from './grid/ToolbarFilters';\r\nimport VirtualRows from './grid/VirtualRows';\r\nimport { buildTotalsFromTable } from './grid/totals';\r\n\r\ntype Props = {\r\n    rows?: BudgetRow[];\r\n    initialSorting?: SortingState;\r\n    initialFilters?: ColumnFiltersState;\r\n};\r\n\r\nfunction toCsv(rows: BudgetRow[], visibleKeys: string[]): string {\r\n    const esc = (v: unknown) => {\r\n        if (v == null) return '';\r\n        const s = String(v);\r\n        return /[\",\\n]/.test(s) ? `\"${s.replace(/\"/g, '\"\"')}\"` : s;\r\n    };\r\n    const header = visibleKeys.map(esc).join(',');\r\n    const body = rows.map(r => visibleKeys.map(k => esc((r as any)[k])).join(',')).join('\\n');\r\n    return `${header}\\n${body}`;\r\n}\r\nfunction downloadBlob(filename: string, content: string, mime = 'text/csv;charset=utf-8') {\r\n    const blob = new Blob([content], { type: mime });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n    URL.revokeObjectURL(url);\r\n}\r\n\r\nexport default function BudgetGrid({\r\n    rows,\r\n    initialSorting = [],\r\n    initialFilters = [],\r\n}: Props) {\r\n    const [data] = React.useState<BudgetRow[]>(() => rows ?? []);\r\n    const [sorting, setSorting] = React.useState<SortingState>(initialSorting);\r\n    const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>(initialFilters);\r\n\r\n    const table = useReactTable<BudgetRow>({\r\n        data,\r\n        columns,\r\n        state: { sorting, columnFilters },\r\n        onSortingChange: setSorting,\r\n        onColumnFiltersChange: setColumnFilters,\r\n        getCoreRowModel: getCoreRowModel(),\r\n        getSortedRowModel: getSortedRowModel(),\r\n        getFilteredRowModel: getFilteredRowModel(),\r\n        enableColumnResizing: true,\r\n        columnResizeMode: 'onChange',\r\n        getRowId: (row, idx) => (row as any).id ?? String(idx),\r\n    } as TableOptions<BudgetRow>);\r\n\r\n    const scrollRef = React.useRef<HTMLDivElement>(null);\r\n\r\n    const handleClearFilters = React.useCallback(() => {\r\n        setColumnFilters([]);\r\n        table.resetColumnFilters();\r\n    }, [table]);\r\n\r\n    const handleExportCsv = React.useCallback(() => {\r\n        const visibleCols = table.getVisibleLeafColumns();\r\n        const keys = visibleCols.map(c => (c.columnDef as any).accessorKey ?? c.id);\r\n        const filtered = table.getFilteredRowModel().rows.map(r => r.original);\r\n        const csv = toCsv(filtered, keys);\r\n        downloadBlob(`budget-grid-${new Date().toISOString().slice(0, 10)}.csv`, csv);\r\n    }, [table]);\r\n\r\n    const totals = buildTotalsFromTable(table, ['amount']);\r\n    const leafCols = table.getVisibleLeafColumns();\r\n\r\n    return (\r\n        <section style={{ display: 'flex', flexDirection: 'column', gap: 12 }}>\r\n            <ToolbarFilters\r\n                filters={columnFilters}\r\n                setFilters={setColumnFilters}\r\n                onClear={handleClearFilters}\r\n                onExport={handleExportCsv}\r\n                table={table}\r\n            />\r\n\r\n            <div\r\n                ref={scrollRef}\r\n                style={{\r\n                    overflow: 'auto',\r\n                    maxHeight: '70vh',\r\n                    border: '1px solid var(--border, #ddd)',\r\n                    borderRadius: 6,\r\n                }}\r\n            >\r\n                <table\r\n                    style={{\r\n                        width: '100%',\r\n                        borderCollapse: 'separate',\r\n                        borderSpacing: 0,\r\n                        tableLayout: 'fixed',\r\n                    }}\r\n                >\r\n                    <colgroup>\r\n                        {leafCols.map(col => (\r\n                            <col\r\n                                key={`col-${col.id}`}\r\n                                style={{\r\n                                    width: col.getSize(),\r\n                                    minWidth: col.columnDef.minSize ?? 40,\r\n                                    maxWidth: col.columnDef.maxSize ?? Number.POSITIVE_INFINITY,\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </colgroup>\r\n\r\n                    <thead>\r\n                        {table.getHeaderGroups().map(hg => (\r\n                            <tr key={hg.id}>\r\n                                {hg.headers.map(h => {\r\n                                    const canResize = h.column.getCanResize();\r\n                                    return (\r\n                                        <th\r\n                                            key={h.id}\r\n                                            colSpan={h.colSpan}\r\n                                            style={{\r\n                                                position: 'relative',\r\n                                                background: 'var(--th-bg, #f8f8f8)',\r\n                                                textAlign: 'left',\r\n                                                fontWeight: 600,\r\n                                                borderBottom: '1px solid #e5e5e5',\r\n                                                borderRight: '1px solid #f3f3f3',   // subtle column separator\r\n                                                padding: '8px 10px',\r\n                                                overflow: 'hidden',\r\n                                                textOverflow: 'ellipsis',\r\n                                                whiteSpace: 'nowrap',\r\n                                            }}\r\n                                        >\r\n                                            {h.isPlaceholder ? null : flexRender(h.column.columnDef.header, h.getContext())}\r\n                                            {canResize && (\r\n                                                <div\r\n                                                    onMouseDown={h.getResizeHandler()}\r\n                                                    onTouchStart={h.getResizeHandler()}\r\n                                                    role=\"separator\"\r\n                                                    aria-orientation=\"vertical\"\r\n                                                    aria-label={`Resize ${String(h.column.id)} column`}\r\n                                                    style={{\r\n                                                        position: 'absolute',\r\n                                                        right: 0,\r\n                                                        top: 0,\r\n                                                        height: '100%',\r\n                                                        width: 6,\r\n                                                        cursor: 'col-resize',\r\n                                                        userSelect: 'none',\r\n                                                        touchAction: 'none',\r\n                                                    }}\r\n                                                />\r\n                                            )}\r\n                                        </th>\r\n                                    );\r\n                                })}\r\n                            </tr>\r\n                        ))}\r\n                    </thead>\r\n\r\n                    <tbody>\r\n                        <VirtualRows\r\n                            rows={table.getRowModel().rows}\r\n                            rowHeight={36}\r\n                            overscan={8}\r\n                            scrollContainerRef={scrollRef}\r\n                            visibleColumnCount={leafCols.length}\r\n                            renderRow={(row: Row<BudgetRow>) => (\r\n                                <tr key={row.id}>\r\n                                    {row.getVisibleCells().map((cell: Cell<BudgetRow, unknown>) => (\r\n                                        <td\r\n                                            key={cell.id}\r\n                                            style={{\r\n                                                borderBottom: '1px solid #f0f0f0',\r\n                                                borderRight: '1px solid #f7f7f7',  // subtle column separator\r\n                                                padding: '6px 10px',\r\n                                                overflow: 'hidden',\r\n                                                textOverflow: 'ellipsis',\r\n                                                whiteSpace: 'nowrap',\r\n                                            }}\r\n                                        >\r\n                                            {flexRender(cell.column.columnDef.cell, cell.getContext())}\r\n                                        </td>\r\n                                    ))}\r\n                                </tr>\r\n                            )}\r\n                        />\r\n                    </tbody>\r\n\r\n                    <tfoot>\r\n                        <tr>\r\n                            {leafCols.map((col, idx) => {\r\n                                const isAmount = col.id === 'amount' || (col.columnDef.meta as any)?.isNumeric;\r\n                                const content =\r\n                                    col.id === 'amount'\r\n                                        ? Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD' }).format(totals.amount ?? 0)\r\n                                        : (idx === 0 ? 'Totals' : '');\r\n\r\n                                return (\r\n                                    <td\r\n                                        key={col.id}\r\n                                        style={{\r\n                                            borderTop: '2px solid #e5e5e5',\r\n                                            borderRight: '1px solid #f7f7f7',   // subtle column separator\r\n                                            fontWeight: 600,\r\n                                            padding: '8px 10px',\r\n                                            textAlign: isAmount ? 'right' : 'left',\r\n                                        }}\r\n                                    >\r\n                                        {content}\r\n                                    </td>\r\n                                );\r\n                            })}\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}