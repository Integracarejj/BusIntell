{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JeremyJoyner/code/budgetintelligence/components/BudgetGrid.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\n/**\r\n * BudgetGrid.tsx (AG Grid v35)\r\n * - Legacy theme (avoids Theming API clash) -> theme=\"legacy\" + legacy CSS files\r\n * - Grouping: Community -> Type -> Category (shown in a single tree column labeled \"Community\")\r\n * - Sorting, Filtering, Resizing\r\n * - Inline editing for Amount\r\n * - Bulk edit toolbar: % delta or set fixed amount on selected rows\r\n * - Pinned bottom total (api.setGridOption('pinnedBottomRowData', ...))\r\n * - CSV export\r\n */\r\n\r\nimport React, { useCallback, useMemo, useRef, useState } from \"react\";\r\nimport { AgGridReact } from \"ag-grid-react\";\r\nimport type {\r\n    ColDef,\r\n    GridApi,\r\n    GridReadyEvent,\r\n    CellValueChangedEvent,\r\n    ValueParserParams,\r\n    IRowNode,\r\n    ApplyColumnStateParams,\r\n    ColumnState,\r\n    GetRowIdParams,\r\n} from \"ag-grid-community\";\r\n\r\n// ---- Legacy CSS (we're explicitly using legacy theme to avoid the v33+ Theming API) ----\r\nimport \"ag-grid-community/styles/ag-grid.css\";\r\nimport \"ag-grid-community/styles/ag-theme-alpine.css\";\r\n\r\n// ---- REQUIRED in v35+ (modular build): register the community features ----\r\nimport { ModuleRegistry, AllCommunityModule } from \"ag-grid-community\";\r\nModuleRegistry.registerModules([AllCommunityModule]);\r\n\r\n// ----------------------- Types -----------------------\r\nexport type BudgetLine = {\r\n    type: \"revenue\" | \"expense\";\r\n    community: string;\r\n    category: string;\r\n    subCategory?: string | null;\r\n    budgetMethod?: string | null;\r\n    driver?: string | null;\r\n    driverTag?: string | null;\r\n    glCode?: string | null;\r\n    period?: string | number | null; // \"YYYY-MM\" or \"YYYY\"\r\n    amount?: number | null;\r\n};\r\n\r\ntype Props = {\r\n    rows: BudgetLine[];\r\n};\r\n\r\n// ----------------------- Helpers -----------------------\r\nconst fmtUSD = (n: number) =>\r\n    new Intl.NumberFormat(\"en-US\", {\r\n        style: \"currency\",\r\n        currency: \"USD\",\r\n        maximumFractionDigits: 0,\r\n    }).format(n);\r\n\r\nconst parseNumber = (v: unknown): number | null => {\r\n    if (v === null || v === undefined) return null;\r\n    if (typeof v === \"number\" && !Number.isNaN(v)) return v;\r\n    const s = String(v).replace(/[$, ]+/g, \"\");\r\n    const n = Number(s);\r\n    return Number.isFinite(n) ? n : null;\r\n};\r\n\r\nconst isLeafRow = (node: IRowNode | null) => !!node && !node.group;\r\n\r\n// ----------------------- Component -----------------------\r\nexport default function BudgetGrid({ rows }: Props) {\r\n    const gridRef = useRef<AgGridReact<BudgetLine>>(null);\r\n    const apiRef = useRef<GridApi | null>(null);\r\n\r\n    // Local copy so we can mutate on edits/bulk operations\r\n    const [rowData, setRowData] = useState<BudgetLine[]>(() => rows ?? []);\r\n    const [groupOrderA, setGroupOrderA] = useState<boolean>(true); // A: community->type->category\r\n\r\n    // ----------------------- Column Definitions -----------------------\r\n    const columnDefs = useMemo<ColDef<BudgetLine>[]>(() => {\r\n        return [\r\n            // Group keys (hidden in data columns; shown via single-column tree)\r\n            {\r\n                headerName: \"Community\",\r\n                field: \"community\",\r\n                rowGroup: true,\r\n                hide: true, // grouped; displayed via the auto group column\r\n                filter: \"agSetColumnFilter\",\r\n            },\r\n            {\r\n                headerName: \"Type\",\r\n                field: \"type\",\r\n                rowGroup: true,\r\n                hide: true,\r\n                filter: \"agSetColumnFilter\",\r\n            },\r\n            {\r\n                headerName: \"Category\",\r\n                field: \"category\",\r\n                rowGroup: true,\r\n                hide: true,\r\n                filter: \"agSetColumnFilter\",\r\n            },\r\n\r\n            // Visible columns\r\n            {\r\n                headerName: \"Subcategory\",\r\n                field: \"subCategory\",\r\n                filter: \"agTextColumnFilter\",\r\n                minWidth: 200,\r\n            },\r\n            {\r\n                headerName: \"Period\",\r\n                field: \"period\",\r\n                filter: \"agTextColumnFilter\",\r\n                width: 120,\r\n            },\r\n            {\r\n                headerName: \"GL Code\",\r\n                field: \"glCode\",\r\n                filter: \"agTextColumnFilter\",\r\n                width: 120,\r\n            },\r\n            {\r\n                headerName: \"Method\",\r\n                field: \"budgetMethod\",\r\n                filter: \"agSetColumnFilter\",\r\n                width: 180,\r\n            },\r\n            {\r\n                headerName: \"Driver\",\r\n                field: \"driver\",\r\n                filter: \"agTextColumnFilter\",\r\n                minWidth: 160,\r\n                valueGetter: (p) => p.data?.driver ?? p.data?.driverTag ?? null,\r\n            },\r\n\r\n            // Amount (editable + aggregated)\r\n            {\r\n                headerName: \"Amount\",\r\n                field: \"amount\",\r\n                type: \"rightAligned\",\r\n                editable: (p) => isLeafRow(p.node),\r\n                valueParser: (params: ValueParserParams) => parseNumber(params.newValue),\r\n                valueFormatter: (p) =>\r\n                    typeof p.value === \"number\" ? fmtUSD(p.value) : \"â€”\",\r\n                aggFunc: \"sum\",\r\n                minWidth: 140,\r\n            },\r\n        ];\r\n    }, []);\r\n\r\n    const defaultColDef = useMemo<ColDef<BudgetLine>>(\r\n        () => ({\r\n            sortable: true,\r\n            resizable: true,\r\n            filter: true,\r\n            flex: 1,\r\n            minWidth: 140,\r\n        }),\r\n        []\r\n    );\r\n\r\n    // Single tree column that shows the group path (Community -> Type -> Category)\r\n    const autoGroupColumnDef = useMemo<ColDef<BudgetLine>>(\r\n        () => ({\r\n            headerName: \"Community\",\r\n            minWidth: 260,\r\n            cellRendererParams: {\r\n                suppressCount: false,\r\n            },\r\n        }),\r\n        []\r\n    );\r\n\r\n    // ----------------------- Toolbar State/Actions -----------------------\r\n    const [pctDelta, setPctDelta] = useState<string>(\"5\"); // default +5%\r\n    const [setValue, setSetValue] = useState<string>(\"\");\r\n\r\n    const applyPercentToSelection = useCallback(() => {\r\n        const api = apiRef.current;\r\n        if (!api) return;\r\n        const pct = Number(pctDelta);\r\n        if (!Number.isFinite(pct)) return;\r\n\r\n        const multiplier = 1 + pct / 100;\r\n        const updated: BudgetLine[] = [...rowData];\r\n        const idSet = new Set<number>();\r\n\r\n        api.getSelectedNodes().forEach((node) => {\r\n            if (!isLeafRow(node)) return;\r\n            const idx = node.rowIndex ?? -1;\r\n            if (idx < 0 || !updated[idx]) return;\r\n            const current = updated[idx].amount ?? 0;\r\n            const next = Math.round(current * multiplier);\r\n            updated[idx] = { ...updated[idx], amount: next };\r\n            idSet.add(idx);\r\n        });\r\n\r\n        if (idSet.size > 0) {\r\n            setRowData(updated);\r\n            api.refreshCells({ force: true });\r\n            recomputePinnedTotal();\r\n        }\r\n    }, [pctDelta, rowData]);\r\n\r\n    const setFixedAmountForSelection = useCallback(() => {\r\n        const api = apiRef.current;\r\n        if (!api) return;\r\n\r\n        const nextVal = parseNumber(setValue);\r\n        if (nextVal === null) return;\r\n\r\n        const updated: BudgetLine[] = [...rowData];\r\n        const idSet = new Set<number>();\r\n\r\n        api.getSelectedNodes().forEach((node) => {\r\n            if (!isLeafRow(node)) return;\r\n            const idx = node.rowIndex ?? -1;\r\n            if (idx < 0 || !updated[idx]) return;\r\n            updated[idx] = { ...updated[idx], amount: nextVal };\r\n            idSet.add(idx);\r\n        });\r\n\r\n        if (idSet.size > 0) {\r\n            setRowData(updated);\r\n            api.refreshCells({ force: true });\r\n            recomputePinnedTotal();\r\n        }\r\n    }, [setValue, rowData]);\r\n\r\n    const clearSelection = useCallback(() => {\r\n        apiRef.current?.deselectAll();\r\n    }, []);\r\n\r\n    const exportCsv = useCallback(() => {\r\n        apiRef.current?.exportDataAsCsv({\r\n            fileName: \"budget-grid.csv\",\r\n            processCellCallback: (p) => {\r\n                if (p.column.getColId() === \"amount\" && typeof p.value === \"number\") {\r\n                    return p.value; // raw number in CSV, not $-formatted\r\n                }\r\n                return p.value ?? \"\";\r\n            },\r\n        });\r\n    }, []);\r\n\r\n    const toggleGroupOrder = useCallback(() => {\r\n        const api = apiRef.current;\r\n        if (!api) return;\r\n\r\n        const asA = groupOrderA; // current state: A or B\r\n\r\n        // A) community -> type -> category\r\n        const orderA: ColumnState[] = [\r\n            { colId: \"community\", rowGroup: true, rowGroupIndex: 0 },\r\n            { colId: \"type\", rowGroup: true, rowGroupIndex: 1 },\r\n            { colId: \"category\", rowGroup: true, rowGroupIndex: 2 },\r\n        ];\r\n        // B) type -> community -> category\r\n        const orderB: ColumnState[] = [\r\n            { colId: \"type\", rowGroup: true, rowGroupIndex: 0 },\r\n            { colId: \"community\", rowGroup: true, rowGroupIndex: 1 },\r\n            { colId: \"category\", rowGroup: true, rowGroupIndex: 2 },\r\n        ];\r\n\r\n        const params: ApplyColumnStateParams = {\r\n            state: asA ? orderB : orderA,\r\n            defaultState: { rowGroup: false, rowGroupIndex: null },\r\n        };\r\n\r\n        api.applyColumnState(params);\r\n        setGroupOrderA(!asA);\r\n    }, [groupOrderA]);\r\n\r\n    // ----------------------- Grid Lifecycle -----------------------\r\n    const recomputePinnedTotal = useCallback(() => {\r\n        const api = apiRef.current;\r\n        if (!api) return;\r\n\r\n        let total = 0;\r\n        // Only sum leaf displayed nodes (respects filters)\r\n        api.forEachLeafNode((node) => {\r\n            if (node.displayed && node.data && typeof node.data.amount === \"number\") {\r\n                total += node.data.amount;\r\n            }\r\n        });\r\n\r\n        api.setGridOption(\"pinnedBottomRowData\", [\r\n            {\r\n                community: \"\",\r\n                type: \"\",\r\n                category: \"\",\r\n                subCategory: \"TOTAL (filtered)\",\r\n                period: \"\",\r\n                glCode: \"\",\r\n                budgetMethod: \"\",\r\n                driver: \"\",\r\n                driverTag: \"\",\r\n                amount: total,\r\n            } as unknown as BudgetLine,\r\n        ]);\r\n    }, []);\r\n\r\n    const onGridReady = useCallback((e: GridReadyEvent) => {\r\n        apiRef.current = e.api;\r\n        // Grouping defined via colDefs (rowGroup: true on hidden key columns)\r\n        // Auto-size visible columns\r\n        e.api.autoSizeAllColumns?.(false);\r\n        recomputePinnedTotal();\r\n    }, [recomputePinnedTotal]);\r\n\r\n    const onModelUpdated = useCallback(() => {\r\n        recomputePinnedTotal();\r\n    }, [recomputePinnedTotal]);\r\n\r\n    const onFilterChanged = useCallback(() => {\r\n        recomputePinnedTotal();\r\n    }, [recomputePinnedTotal]);\r\n\r\n    const onCellValueChanged = useCallback((e: CellValueChangedEvent<BudgetLine>) => {\r\n        const idx = e.node.rowIndex ?? -1;\r\n        if (idx >= 0) {\r\n            setRowData((prev) => {\r\n                if (!prev[idx]) return prev;\r\n                const next = [...prev];\r\n                next[idx] = { ...next[idx], amount: parseNumber(e.newValue) ?? 0 };\r\n                return next;\r\n            });\r\n            recomputePinnedTotal();\r\n        }\r\n    }, [recomputePinnedTotal]);\r\n\r\n    const getRowId = useCallback((p: GetRowIdParams<BudgetLine>) => {\r\n        const d = p.data!;\r\n        return `${d.community ?? \"\"}|${d.type ?? \"\"}|${d.category ?? \"\"}|${d.subCategory ?? \"\"}|${d.period ?? \"\"}`;\r\n    }, []);\r\n\r\n    // ----------------------- Render -----------------------\r\n    return (\r\n        <section aria-label=\"Budget grid\" className=\"space-y-3\">\r\n            {/* Toolbar */}\r\n            <div className=\"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white p-3 shadow-sm\">\r\n                <div className=\"mr-3 text-sm font-semibold text-slate-700\">\r\n                    Bulk Edit (selection)\r\n                </div>\r\n\r\n                <label className=\"sr-only\" htmlFor=\"pct-input\">\r\n                    Percent change\r\n                </label>\r\n                <input\r\n                    id=\"pct-input\"\r\n                    aria-label=\"Percent change\"\r\n                    className=\"rounded-md border border-slate-300 px-2 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                    type=\"number\"\r\n                    step=\"0.1\"\r\n                    value={pctDelta}\r\n                    onChange={(e) => setPctDelta(e.target.value)}\r\n                    style={{ width: 90 }}\r\n                    placeholder=\"%\"\r\n                />\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"Apply percent change to selected rows\"\r\n                    onClick={applyPercentToSelection}\r\n                    className=\"rounded-md bg-teal-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-teal-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                >\r\n                    Apply % Î”\r\n                </button>\r\n\r\n                <span className=\"mx-2 text-slate-300\">|</span>\r\n\r\n                <label className=\"sr-only\" htmlFor=\"setamount-input\">\r\n                    Set fixed amount\r\n                </label>\r\n                <input\r\n                    id=\"setamount-input\"\r\n                    aria-label=\"Set fixed amount\"\r\n                    className=\"rounded-md border border-slate-300 px-2 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                    type=\"number\"\r\n                    step=\"1\"\r\n                    value={setValue}\r\n                    onChange={(e) => setSetValue(e.target.value)}\r\n                    style={{ width: 140 }}\r\n                    placeholder=\"Set amount ($)\"\r\n                />\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"Set fixed amount on selected rows\"\r\n                    onClick={setFixedAmountForSelection}\r\n                    className=\"rounded-md bg-slate-700 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                >\r\n                    Set Amount\r\n                </button>\r\n\r\n                <span className=\"mx-2 text-slate-300\">|</span>\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"Clear selection\"\r\n                    onClick={clearSelection}\r\n                    className=\"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                >\r\n                    Clear Selection\r\n                </button>\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"Export to CSV\"\r\n                    onClick={exportCsv}\r\n                    className=\"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                >\r\n                    Export CSV\r\n                </button>\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    aria-label=\"Toggle group order\"\r\n                    onClick={toggleGroupOrder}\r\n                    className=\"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500\"\r\n                >\r\n                    Toggle Group Order\r\n                </button>\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div\r\n                className=\"ag-theme-alpine w-full\"\r\n                style={{ height: 720 }}\r\n                aria-label=\"Budget AG Grid\"\r\n            >\r\n                <AgGridReact<BudgetLine>\r\n                    ref={gridRef}\r\n                    rowData={rowData}\r\n                    columnDefs={columnDefs}\r\n                    defaultColDef={defaultColDef}\r\n                    autoGroupColumnDef={autoGroupColumnDef}\r\n                    // ðŸ‘‡ single tree column shows Community -> Type -> Category\r\n                    groupDisplayType=\"singleColumn\"\r\n                    suppressDragLeaveHidesColumns={true}\r\n                    animateRows={true}\r\n                    // NOTE: enableRangeSelection removed (Enterprise module)\r\n                    rowSelection=\"multiple\"\r\n                    onGridReady={onGridReady}\r\n                    onModelUpdated={onModelUpdated}\r\n                    onFilterChanged={onFilterChanged}\r\n                    onCellValueChanged={onCellValueChanged}\r\n                    getRowId={getRowId}\r\n                    // ðŸ‘‡ Force legacy theme so legacy CSS is valid and no theming clash occurs\r\n                    theme=\"legacy\"\r\n                />\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}